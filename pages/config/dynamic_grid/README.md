# 动态网格策略配置页面

## 概述

动态网格策略是一个基于网格交易的高级策略，能够根据市场价格的峰值和趋势动态调整网格边界。该策略结合了传统网格交易的稳定性和动态调整的灵活性，适用于震荡和趋势市场。

## 策略特点

### 1. 自动边界初始化
- 基于当前市场价格自动计算初始网格边界

### 2. 峰值检测
- 自动识别价格的峰值和谷值
- 可配置的检测周期和价格变化阈值

### 3. 动态边界调整
- 根据峰值动态调整网格上下边界
- 智能边界重新计算机制

### 4. 趋势判断
- 在上涨趋势时开多，下跌趋势时开空
- 基于价格变化百分比的趋势识别

### 5. 智能网格重启
- 在价格突破边界或趋势发生重大变化时重启网格
- 可配置的重启条件和频率

### 6. 自动更新机制
- 支持定时更新和趋势变化触发更新
- 灵活的更新策略配置

## 配置参数

### 基础配置

| 参数 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| `connector_name` | string | "binance_perpetual" | 连接器名称 |
| `trading_pair` | string | "WLD-USDT" | 交易对 |
| `leverage` | int | 20 | 杠杆倍数 |
| `position_mode` | string | "HEDGE" | 仓位模式 |
| `total_amount_quote` | float | 1000.0 | 总投入资金 |

### 动态网格配置

| 参数 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| `avg_grid_width_percentage` | float | 0.1 | 单个网格宽度百分比 |
| `all_grid_width_percentage` | float | 0.1 | 整体网格宽度百分比 |
| `initial_grid_width_percentage` | float | 0.1 | 超出上下边界百分比 |
| `exceed_bound_percentage` | int | 600 | 调整间隔(秒) |


### 订单管理配置

| 参数 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| `min_spread_between_orders` | float | 0.001 | 订单间最小价差 |
| `min_order_amount_quote` | float | 5.0 | 最小订单金额 |
| `max_open_orders` | int | 3 | 最大同时开放订单数 |
| `max_orders_per_batch` | int | 1 | 每批次最大订单数 |
| `order_frequency` | int | 5 | 订单频率(秒) |
| `activation_bounds` | float | null | 激活边界 |
| `keep_position` | bool | false | 保持仓位 |

### 三重障碍配置

| 参数 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| `open_order_type` | string | "LIMIT_MAKER" | 开仓订单类型 |
| `take_profit_order_type` | string | "LIMIT_MAKER" | 止盈订单类型 |
| `stop_loss_order_type` | string | "MARKET" | 止损订单类型 |
| `take_profit` | float | 0.002 | 止盈比例 |
| `stop_loss` | float | 0.01 | 止损比例 |

## 使用方法

### 1. 访问配置页面

在Streamlit应用中导航到动态网格策略配置页面。

### 2. 配置参数

根据您的交易需求调整各项参数：

- **基础配置**: 设置交易对、杠杆和资金
- **动态网格**: 配置网格宽度和峰值检测
- **趋势判断**: 设置趋势识别参数
- **风险管理**: 配置止盈止损

### 3. 预览策略

配置页面提供实时的策略可视化，包括：

- 动态网格边界显示
- 趋势指标和方向
- 当前价格和网格宽度
- 策略关键指标

### 4. 保存配置

完成参数配置后，使用保存功能将配置导出为YAML文件。

## 策略逻辑

### 初始化阶段

1. 获取当前市场价格
2. 基于网格宽度百分比计算初始边界
3. 初始化峰值检测和趋势判断模块

### 运行阶段

1. **价格监控**: 持续监控价格变化
2. **峰值检测**: 识别价格峰值和谷值
3. **趋势判断**: 分析价格趋势方向
4. **边界调整**: 根据峰值动态调整网格边界
5. **订单管理**: 在网格内放置和管理订单
6. **风险控制**: 执行止盈止损策略

## 风险提示

⚠️ **重要提示**:

- 动态网格策略涉及高频交易，请确保有足够的资金和风险承受能力
- 在使用前请在测试环境中充分验证策略参数
- 市场极端波动可能导致策略失效，请设置合理的止损
- 建议从小资金开始，逐步增加投入

## 技术支持

如有问题或建议，请通过以下方式联系：

- GitHub Issues
- 项目文档
- 社区论坛

---

*最后更新 / Last Updated: 2024*